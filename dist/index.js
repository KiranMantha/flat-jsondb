var ro=typeof global=="object"&&global&&global.Object===Object&&global,fr=ro;var to=typeof self=="object"&&self&&self.Object===Object&&self,eo=fr||to||Function("return this")(),d=eo;var oo=d.Symbol,y=oo;var Nr=Object.prototype,ao=Nr.hasOwnProperty,fo=Nr.toString,rr=y?y.toStringTag:void 0;function io(r){var t=ao.call(r,rr),e=r[rr];try{r[rr]=void 0;var o=!0}catch{}var a=fo.call(r);return o&&(t?r[rr]=e:delete r[rr]),a}var qr=io;var no=Object.prototype,so=no.toString;function po(r){return so.call(r)}var Ur=po;var uo="[object Null]",mo="[object Undefined]",Kr=y?y.toStringTag:void 0;function lo(r){return r==null?r===void 0?mo:uo:Kr&&Kr in Object(r)?qr(r):Ur(r)}var b=lo;function xo(r){return r!=null&&typeof r=="object"}var _=xo;var co="[object Symbol]";function ho(r){return typeof r=="symbol"||_(r)&&b(r)==co}var M=ho;function go(r,t){for(var e=-1,o=r==null?0:r.length,a=Array(o);++e<o;)a[e]=t(r[e],e,r);return a}var Hr=go;var yo=Array.isArray,l=yo;var vo=1/0,$r=y?y.prototype:void 0,Xr=$r?$r.toString:void 0;function Jr(r){if(typeof r=="string")return r;if(l(r))return Hr(r,Jr)+"";if(M(r))return Xr?Xr.call(r):"";var t=r+"";return t=="0"&&1/r==-vo?"-0":t}var Yr=Jr;var bo=/\s/;function _o(r){for(var t=r.length;t--&&bo.test(r.charAt(t)););return t}var Zr=_o;var Ao=/^\s+/;function To(r){return r&&r.slice(0,Zr(r)+1).replace(Ao,"")}var Vr=To;function wo(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var A=wo;var Qr=NaN,Oo=/^[-+]0x[0-9a-f]+$/i,So=/^0b[01]+$/i,Io=/^0o[0-7]+$/i,Po=parseInt;function Co(r){if(typeof r=="number")return r;if(M(r))return Qr;if(A(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=A(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=Vr(r);var e=So.test(r);return e||Io.test(r)?Po(r.slice(2),e?2:8):Oo.test(r)?Qr:+r}var kr=Co;var rt=1/0,Eo=17976931348623157e292;function Mo(r){if(!r)return r===0?r:0;if(r=kr(r),r===rt||r===-rt){var t=r<0?-1:1;return t*Eo}return r===r?r:0}var tt=Mo;function Lo(r){var t=tt(r),e=t%1;return t===t?e?t-e:t:0}var et=Lo;function Ro(r){return r}var U=Ro;var Do="[object AsyncFunction]",Fo="[object Function]",jo="[object GeneratorFunction]",Bo="[object Proxy]";function Go(r){if(!A(r))return!1;var t=b(r);return t==Fo||t==jo||t==Do||t==Bo}var ir=Go;var Wo=d["__core-js_shared__"],nr=Wo;var ot=function(){var r=/[^.]+$/.exec(nr&&nr.keys&&nr.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function zo(r){return!!ot&&ot in r}var at=zo;var No=Function.prototype,qo=No.toString;function Uo(r){if(r!=null){try{return qo.call(r)}catch{}try{return r+""}catch{}}return""}var I=Uo;var Ko=/[\\^$.*+?()[\]{}|]/g,Ho=/^\[object .+?Constructor\]$/,$o=Function.prototype,Xo=Object.prototype,Jo=$o.toString,Yo=Xo.hasOwnProperty,Zo=RegExp("^"+Jo.call(Yo).replace(Ko,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vo(r){if(!A(r)||at(r))return!1;var t=ir(r)?Zo:Ho;return t.test(I(r))}var ft=Vo;function Qo(r,t){return r?.[t]}var it=Qo;function ko(r,t){var e=it(r,t);return ft(e)?e:void 0}var c=ko;var ra=c(d,"WeakMap"),sr=ra;function ta(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}var nt=ta;var ea=800,oa=16,aa=Date.now;function fa(r){var t=0,e=0;return function(){var o=aa(),a=oa-(o-e);if(e=o,a>0){if(++t>=ea)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}var st=fa;function ia(r){return function(){return r}}var pt=ia;var na=function(){try{var r=c(Object,"defineProperty");return r({},"",{}),r}catch{}}(),K=na;var sa=K?function(r,t){return K(r,"toString",{configurable:!0,enumerable:!1,value:pt(t),writable:!0})}:U,ut=sa;var pa=st(ut),mt=pa;function ua(r,t,e,o){for(var a=r.length,f=e+(o?1:-1);o?f--:++f<a;)if(t(r[f],f,r))return f;return-1}var lt=ua;var ma=9007199254740991,la=/^(?:0|[1-9]\d*)$/;function da(r,t){var e=typeof r;return t=t??ma,!!t&&(e=="number"||e!="symbol"&&la.test(r))&&r>-1&&r%1==0&&r<t}var L=da;function xa(r,t,e){t=="__proto__"&&K?K(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}var pr=xa;function ca(r,t){return r===t||r!==r&&t!==t}var R=ca;var ha=Object.prototype,ga=ha.hasOwnProperty;function ya(r,t,e){var o=r[t];(!(ga.call(r,t)&&R(o,e))||e===void 0&&!(t in r))&&pr(r,t,e)}var ur=ya;function va(r,t,e,o){var a=!e;e||(e={});for(var f=-1,i=t.length;++f<i;){var n=t[f],s=o?o(e[n],r[n],n,e,r):void 0;s===void 0&&(s=r[n]),a?pr(e,n,s):ur(e,n,s)}return e}var dt=va;var xt=Math.max;function ba(r,t,e){return t=xt(t===void 0?r.length-1:t,0),function(){for(var o=arguments,a=-1,f=xt(o.length-t,0),i=Array(f);++a<f;)i[a]=o[t+a];a=-1;for(var n=Array(t+1);++a<t;)n[a]=o[a];return n[t]=e(i),nt(r,this,n)}}var ct=ba;function _a(r,t){return mt(ct(r,t,U),r+"")}var ht=_a;var Aa=9007199254740991;function Ta(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Aa}var H=Ta;function wa(r){return r!=null&&H(r.length)&&!ir(r)}var T=wa;function Oa(r,t,e){if(!A(e))return!1;var o=typeof t;return(o=="number"?T(e)&&L(t,e.length):o=="string"&&t in e)?R(e[t],r):!1}var gt=Oa;function Sa(r){return ht(function(t,e){var o=-1,a=e.length,f=a>1?e[a-1]:void 0,i=a>2?e[2]:void 0;for(f=r.length>3&&typeof f=="function"?(a--,f):void 0,i&&gt(e[0],e[1],i)&&(f=a<3?void 0:f,a=1),t=Object(t);++o<a;){var n=e[o];n&&r(t,n,o,f)}return t})}var yt=Sa;var Ia=Object.prototype;function Pa(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Ia;return r===e}var mr=Pa;function Ca(r,t){for(var e=-1,o=Array(r);++e<r;)o[e]=t(e);return o}var vt=Ca;var Ea="[object Arguments]";function Ma(r){return _(r)&&b(r)==Ea}var Sr=Ma;var bt=Object.prototype,La=bt.hasOwnProperty,Ra=bt.propertyIsEnumerable,Da=Sr(function(){return arguments}())?Sr:function(r){return _(r)&&La.call(r,"callee")&&!Ra.call(r,"callee")},lr=Da;function Fa(){return!1}var _t=Fa;var wt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,At=wt&&typeof module=="object"&&module&&!module.nodeType&&module,ja=At&&At.exports===wt,Tt=ja?d.Buffer:void 0,Ba=Tt?Tt.isBuffer:void 0,Ga=Ba||_t,tr=Ga;var Wa="[object Arguments]",za="[object Array]",Na="[object Boolean]",qa="[object Date]",Ua="[object Error]",Ka="[object Function]",Ha="[object Map]",$a="[object Number]",Xa="[object Object]",Ja="[object RegExp]",Ya="[object Set]",Za="[object String]",Va="[object WeakMap]",Qa="[object ArrayBuffer]",ka="[object DataView]",rf="[object Float32Array]",tf="[object Float64Array]",ef="[object Int8Array]",of="[object Int16Array]",af="[object Int32Array]",ff="[object Uint8Array]",nf="[object Uint8ClampedArray]",sf="[object Uint16Array]",pf="[object Uint32Array]",u={};u[rf]=u[tf]=u[ef]=u[of]=u[af]=u[ff]=u[nf]=u[sf]=u[pf]=!0;u[Wa]=u[za]=u[Qa]=u[Na]=u[ka]=u[qa]=u[Ua]=u[Ka]=u[Ha]=u[$a]=u[Xa]=u[Ja]=u[Ya]=u[Za]=u[Va]=!1;function uf(r){return _(r)&&H(r.length)&&!!u[b(r)]}var Ot=uf;function mf(r){return function(t){return r(t)}}var St=mf;var It=typeof exports=="object"&&exports&&!exports.nodeType&&exports,er=It&&typeof module=="object"&&module&&!module.nodeType&&module,lf=er&&er.exports===It,Ir=lf&&fr.process,df=function(){try{var r=er&&er.require&&er.require("util").types;return r||Ir&&Ir.binding&&Ir.binding("util")}catch{}}(),Pr=df;var Pt=Pr&&Pr.isTypedArray,xf=Pt?St(Pt):Ot,dr=xf;var cf=Object.prototype,hf=cf.hasOwnProperty;function gf(r,t){var e=l(r),o=!e&&lr(r),a=!e&&!o&&tr(r),f=!e&&!o&&!a&&dr(r),i=e||o||a||f,n=i?vt(r.length,String):[],s=n.length;for(var p in r)(t||hf.call(r,p))&&!(i&&(p=="length"||a&&(p=="offset"||p=="parent")||f&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||L(p,s)))&&n.push(p);return n}var Ct=gf;function yf(r,t){return function(e){return r(t(e))}}var Et=yf;var vf=Et(Object.keys,Object),Mt=vf;var bf=Object.prototype,_f=bf.hasOwnProperty;function Af(r){if(!mr(r))return Mt(r);var t=[];for(var e in Object(r))_f.call(r,e)&&e!="constructor"&&t.push(e);return t}var Lt=Af;function Tf(r){return T(r)?Ct(r):Lt(r)}var w=Tf;var wf=Object.prototype,Of=wf.hasOwnProperty,Sf=yt(function(r,t){if(mr(t)||T(t)){dt(t,w(t),r);return}for(var e in t)Of.call(t,e)&&ur(r,e,t[e])}),Cr=Sf;var If=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pf=/^\w*$/;function Cf(r,t){if(l(r))return!1;var e=typeof r;return e=="number"||e=="symbol"||e=="boolean"||r==null||M(r)?!0:Pf.test(r)||!If.test(r)||t!=null&&r in Object(t)}var $=Cf;var Ef=c(Object,"create"),P=Ef;function Mf(){this.__data__=P?P(null):{},this.size=0}var Rt=Mf;function Lf(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var Dt=Lf;var Rf="__lodash_hash_undefined__",Df=Object.prototype,Ff=Df.hasOwnProperty;function jf(r){var t=this.__data__;if(P){var e=t[r];return e===Rf?void 0:e}return Ff.call(t,r)?t[r]:void 0}var Ft=jf;var Bf=Object.prototype,Gf=Bf.hasOwnProperty;function Wf(r){var t=this.__data__;return P?t[r]!==void 0:Gf.call(t,r)}var jt=Wf;var zf="__lodash_hash_undefined__";function Nf(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=P&&t===void 0?zf:t,this}var Bt=Nf;function X(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var o=r[t];this.set(o[0],o[1])}}X.prototype.clear=Rt;X.prototype.delete=Dt;X.prototype.get=Ft;X.prototype.has=jt;X.prototype.set=Bt;var Er=X;function qf(){this.__data__=[],this.size=0}var Gt=qf;function Uf(r,t){for(var e=r.length;e--;)if(R(r[e][0],t))return e;return-1}var D=Uf;var Kf=Array.prototype,Hf=Kf.splice;function $f(r){var t=this.__data__,e=D(t,r);if(e<0)return!1;var o=t.length-1;return e==o?t.pop():Hf.call(t,e,1),--this.size,!0}var Wt=$f;function Xf(r){var t=this.__data__,e=D(t,r);return e<0?void 0:t[e][1]}var zt=Xf;function Jf(r){return D(this.__data__,r)>-1}var Nt=Jf;function Yf(r,t){var e=this.__data__,o=D(e,r);return o<0?(++this.size,e.push([r,t])):e[o][1]=t,this}var qt=Yf;function J(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var o=r[t];this.set(o[0],o[1])}}J.prototype.clear=Gt;J.prototype.delete=Wt;J.prototype.get=zt;J.prototype.has=Nt;J.prototype.set=qt;var F=J;var Zf=c(d,"Map"),j=Zf;function Vf(){this.size=0,this.__data__={hash:new Er,map:new(j||F),string:new Er}}var Ut=Vf;function Qf(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var Kt=Qf;function kf(r,t){var e=r.__data__;return Kt(t)?e[typeof t=="string"?"string":"hash"]:e.map}var B=kf;function ri(r){var t=B(this,r).delete(r);return this.size-=t?1:0,t}var Ht=ri;function ti(r){return B(this,r).get(r)}var $t=ti;function ei(r){return B(this,r).has(r)}var Xt=ei;function oi(r,t){var e=B(this,r),o=e.size;return e.set(r,t),this.size+=e.size==o?0:1,this}var Jt=oi;function Y(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var o=r[t];this.set(o[0],o[1])}}Y.prototype.clear=Ut;Y.prototype.delete=Ht;Y.prototype.get=$t;Y.prototype.has=Xt;Y.prototype.set=Jt;var N=Y;var ai="Expected a function";function Mr(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(ai);var e=function(){var o=arguments,a=t?t.apply(this,o):o[0],f=e.cache;if(f.has(a))return f.get(a);var i=r.apply(this,o);return e.cache=f.set(a,i)||f,i};return e.cache=new(Mr.Cache||N),e}Mr.Cache=N;var Yt=Mr;var fi=500;function ii(r){var t=Yt(r,function(o){return e.size===fi&&e.clear(),o}),e=t.cache;return t}var Zt=ii;var ni=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,si=/\\(\\)?/g,pi=Zt(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(ni,function(e,o,a,f){t.push(a?f.replace(si,"$1"):o||e)}),t}),Vt=pi;function ui(r){return r==null?"":Yr(r)}var xr=ui;function mi(r,t){return l(r)?r:$(r,t)?[r]:Vt(xr(r))}var Z=mi;var li=1/0;function di(r){if(typeof r=="string"||M(r))return r;var t=r+"";return t=="0"&&1/r==-li?"-0":t}var O=di;function xi(r,t){t=Z(t,r);for(var e=0,o=t.length;r!=null&&e<o;)r=r[O(t[e++])];return e&&e==o?r:void 0}var V=xi;function ci(r,t,e){var o=r==null?void 0:V(r,t);return o===void 0?e:o}var Qt=ci;function hi(r,t){for(var e=-1,o=t.length,a=r.length;++e<o;)r[a+e]=t[e];return r}var kt=hi;function gi(r,t,e){var o=-1,a=r.length;t<0&&(t=-t>a?0:a+t),e=e>a?a:e,e<0&&(e+=a),a=t>e?0:e-t>>>0,t>>>=0;for(var f=Array(a);++o<a;)f[o]=r[o+t];return f}var re=gi;function yi(){this.__data__=new F,this.size=0}var te=yi;function vi(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}var ee=vi;function bi(r){return this.__data__.get(r)}var oe=bi;function _i(r){return this.__data__.has(r)}var ae=_i;var Ai=200;function Ti(r,t){var e=this.__data__;if(e instanceof F){var o=e.__data__;if(!j||o.length<Ai-1)return o.push([r,t]),this.size=++e.size,this;e=this.__data__=new N(o)}return e.set(r,t),this.size=e.size,this}var fe=Ti;function Q(r){var t=this.__data__=new F(r);this.size=t.size}Q.prototype.clear=te;Q.prototype.delete=ee;Q.prototype.get=oe;Q.prototype.has=ae;Q.prototype.set=fe;var k=Q;function wi(r,t){for(var e=-1,o=r==null?0:r.length,a=0,f=[];++e<o;){var i=r[e];t(i,e,r)&&(f[a++]=i)}return f}var cr=wi;function Oi(){return[]}var ie=Oi;var Si=Object.prototype,Ii=Si.propertyIsEnumerable,ne=Object.getOwnPropertySymbols,Pi=ne?function(r){return r==null?[]:(r=Object(r),cr(ne(r),function(t){return Ii.call(r,t)}))}:ie,se=Pi;function Ci(r,t,e){var o=t(r);return l(r)?o:kt(o,e(r))}var pe=Ci;function Ei(r){return pe(r,w,se)}var Lr=Ei;var Mi=c(d,"DataView"),hr=Mi;var Li=c(d,"Promise"),gr=Li;var Ri=c(d,"Set"),yr=Ri;var ue="[object Map]",Di="[object Object]",me="[object Promise]",le="[object Set]",de="[object WeakMap]",xe="[object DataView]",Fi=I(hr),ji=I(j),Bi=I(gr),Gi=I(yr),Wi=I(sr),q=b;(hr&&q(new hr(new ArrayBuffer(1)))!=xe||j&&q(new j)!=ue||gr&&q(gr.resolve())!=me||yr&&q(new yr)!=le||sr&&q(new sr)!=de)&&(q=function(r){var t=b(r),e=t==Di?r.constructor:void 0,o=e?I(e):"";if(o)switch(o){case Fi:return xe;case ji:return ue;case Bi:return me;case Gi:return le;case Wi:return de}return t});var Rr=q;var zi=d.Uint8Array,Dr=zi;var Ni="__lodash_hash_undefined__";function qi(r){return this.__data__.set(r,Ni),this}var ce=qi;function Ui(r){return this.__data__.has(r)}var he=Ui;function vr(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new N;++t<e;)this.add(r[t])}vr.prototype.add=vr.prototype.push=ce;vr.prototype.has=he;var ge=vr;function Ki(r,t){for(var e=-1,o=r==null?0:r.length;++e<o;)if(t(r[e],e,r))return!0;return!1}var ye=Ki;function Hi(r,t){return r.has(t)}var ve=Hi;var $i=1,Xi=2;function Ji(r,t,e,o,a,f){var i=e&$i,n=r.length,s=t.length;if(n!=s&&!(i&&s>n))return!1;var p=f.get(r),h=f.get(t);if(p&&h)return p==t&&h==r;var x=-1,m=!0,S=e&Xi?new ge:void 0;for(f.set(r,t),f.set(t,r);++x<n;){var g=r[x],v=t[x];if(o)var E=i?o(v,g,x,t,r,f):o(g,v,x,r,t,f);if(E!==void 0){if(E)continue;m=!1;break}if(S){if(!ye(t,function(W,z){if(!ve(S,z)&&(g===W||a(g,W,e,o,f)))return S.push(z)})){m=!1;break}}else if(!(g===v||a(g,v,e,o,f))){m=!1;break}}return f.delete(r),f.delete(t),m}var br=Ji;function Yi(r){var t=-1,e=Array(r.size);return r.forEach(function(o,a){e[++t]=[a,o]}),e}var be=Yi;function Zi(r){var t=-1,e=Array(r.size);return r.forEach(function(o){e[++t]=o}),e}var _e=Zi;var Vi=1,Qi=2,ki="[object Boolean]",rn="[object Date]",tn="[object Error]",en="[object Map]",on="[object Number]",an="[object RegExp]",fn="[object Set]",nn="[object String]",sn="[object Symbol]",pn="[object ArrayBuffer]",un="[object DataView]",Ae=y?y.prototype:void 0,Fr=Ae?Ae.valueOf:void 0;function mn(r,t,e,o,a,f,i){switch(e){case un:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case pn:return!(r.byteLength!=t.byteLength||!f(new Dr(r),new Dr(t)));case ki:case rn:case on:return R(+r,+t);case tn:return r.name==t.name&&r.message==t.message;case an:case nn:return r==t+"";case en:var n=be;case fn:var s=o&Vi;if(n||(n=_e),r.size!=t.size&&!s)return!1;var p=i.get(r);if(p)return p==t;o|=Qi,i.set(r,t);var h=br(n(r),n(t),o,a,f,i);return i.delete(r),h;case sn:if(Fr)return Fr.call(r)==Fr.call(t)}return!1}var Te=mn;var ln=1,dn=Object.prototype,xn=dn.hasOwnProperty;function cn(r,t,e,o,a,f){var i=e&ln,n=Lr(r),s=n.length,p=Lr(t),h=p.length;if(s!=h&&!i)return!1;for(var x=s;x--;){var m=n[x];if(!(i?m in t:xn.call(t,m)))return!1}var S=f.get(r),g=f.get(t);if(S&&g)return S==t&&g==r;var v=!0;f.set(r,t),f.set(t,r);for(var E=i;++x<s;){m=n[x];var W=r[m],z=t[m];if(o)var zr=i?o(z,W,m,t,r,f):o(W,z,m,r,t,f);if(!(zr===void 0?W===z||a(W,z,e,o,f):zr)){v=!1;break}E||(E=m=="constructor")}if(v&&!E){var or=r.constructor,ar=t.constructor;or!=ar&&"constructor"in r&&"constructor"in t&&!(typeof or=="function"&&or instanceof or&&typeof ar=="function"&&ar instanceof ar)&&(v=!1)}return f.delete(r),f.delete(t),v}var we=cn;var hn=1,Oe="[object Arguments]",Se="[object Array]",_r="[object Object]",gn=Object.prototype,Ie=gn.hasOwnProperty;function yn(r,t,e,o,a,f){var i=l(r),n=l(t),s=i?Se:Rr(r),p=n?Se:Rr(t);s=s==Oe?_r:s,p=p==Oe?_r:p;var h=s==_r,x=p==_r,m=s==p;if(m&&tr(r)){if(!tr(t))return!1;i=!0,h=!1}if(m&&!h)return f||(f=new k),i||dr(r)?br(r,t,e,o,a,f):Te(r,t,s,e,o,a,f);if(!(e&hn)){var S=h&&Ie.call(r,"__wrapped__"),g=x&&Ie.call(t,"__wrapped__");if(S||g){var v=S?r.value():r,E=g?t.value():t;return f||(f=new k),a(v,E,e,o,f)}}return m?(f||(f=new k),we(r,t,e,o,a,f)):!1}var Pe=yn;function Ce(r,t,e,o,a){return r===t?!0:r==null||t==null||!_(r)&&!_(t)?r!==r&&t!==t:Pe(r,t,e,o,Ce,a)}var Ar=Ce;var vn=1,bn=2;function _n(r,t,e,o){var a=e.length,f=a,i=!o;if(r==null)return!f;for(r=Object(r);a--;){var n=e[a];if(i&&n[2]?n[1]!==r[n[0]]:!(n[0]in r))return!1}for(;++a<f;){n=e[a];var s=n[0],p=r[s],h=n[1];if(i&&n[2]){if(p===void 0&&!(s in r))return!1}else{var x=new k;if(o)var m=o(p,h,s,r,t,x);if(!(m===void 0?Ar(h,p,vn|bn,o,x):m))return!1}}return!0}var Ee=_n;function An(r){return r===r&&!A(r)}var Tr=An;function Tn(r){for(var t=w(r),e=t.length;e--;){var o=t[e],a=r[o];t[e]=[o,a,Tr(a)]}return t}var Me=Tn;function wn(r,t){return function(e){return e==null?!1:e[r]===t&&(t!==void 0||r in Object(e))}}var wr=wn;function On(r){var t=Me(r);return t.length==1&&t[0][2]?wr(t[0][0],t[0][1]):function(e){return e===r||Ee(e,r,t)}}var Le=On;function Sn(r,t){return r!=null&&t in Object(r)}var Re=Sn;function In(r,t,e){t=Z(t,r);for(var o=-1,a=t.length,f=!1;++o<a;){var i=O(t[o]);if(!(f=r!=null&&e(r,i)))break;r=r[i]}return f||++o!=a?f:(a=r==null?0:r.length,!!a&&H(a)&&L(i,a)&&(l(r)||lr(r)))}var De=In;function Pn(r,t){return r!=null&&De(r,t,Re)}var Fe=Pn;var Cn=1,En=2;function Mn(r,t){return $(r)&&Tr(t)?wr(O(r),t):function(e){var o=Qt(e,r);return o===void 0&&o===t?Fe(e,r):Ar(t,o,Cn|En)}}var je=Mn;function Ln(r){return function(t){return t?.[r]}}var Be=Ln;function Rn(r){return function(t){return V(t,r)}}var Ge=Rn;function Dn(r){return $(r)?Be(O(r)):Ge(r)}var We=Dn;function Fn(r){return typeof r=="function"?r:r==null?U:typeof r=="object"?l(r)?je(r[0],r[1]):Le(r):We(r)}var G=Fn;function jn(r){return function(t,e,o){for(var a=-1,f=Object(t),i=o(t),n=i.length;n--;){var s=i[r?n:++a];if(e(f[s],s,f)===!1)break}return t}}var ze=jn;var Bn=ze(),Ne=Bn;function Gn(r,t){return r&&Ne(r,t,w)}var qe=Gn;function Wn(r,t){return function(e,o){if(e==null)return e;if(!T(e))return r(e,o);for(var a=e.length,f=t?a:-1,i=Object(e);(t?f--:++f<a)&&o(i[f],f,i)!==!1;);return e}}var Ue=Wn;var zn=Ue(qe),Ke=zn;function Nn(r){var t=r==null?0:r.length;return t?r[t-1]:void 0}var He=Nn;function qn(r,t){var e=[];return Ke(r,function(o,a,f){t(o,a,f)&&e.push(o)}),e}var $e=qn;function Un(r,t){var e=l(r)?cr:$e;return e(r,G(t,3))}var jr=Un;function Kn(r){return function(t,e,o){var a=Object(t);if(!T(t)){var f=G(e,3);t=w(t),e=function(n){return f(a[n],n,a)}}var i=r(t,e,o);return i>-1?a[f?t[i]:i]:void 0}}var Xe=Kn;var Hn=Math.max;function $n(r,t,e){var o=r==null?0:r.length;if(!o)return-1;var a=e==null?0:et(e);return a<0&&(a=Hn(o+a,0)),lt(r,G(t,3),a)}var Je=$n;var Xn=Xe(Je),Br=Xn;function Jn(r,t){return t.length<2?r:V(r,re(t,0,-1))}var Ye=Jn;function Yn(r,t){return t=Z(t,r),r=Ye(r,t),r==null||delete r[O(He(t))]}var Ze=Yn;var Zn=Array.prototype,Vn=Zn.splice;function Qn(r,t){for(var e=r?t.length:0,o=e-1;e--;){var a=t[e];if(e==o||a!==f){var f=a;L(a)?Vn.call(r,a,1):Ze(r,a)}}return r}var Ve=Qn;function kn(r,t){var e=[];if(!(r&&r.length))return e;var o=-1,a=[],f=r.length;for(t=G(t,3);++o<f;){var i=r[o];t(i,o,r)&&(e.push(i),a.push(o))}return Ve(r,a),e}var Gr=kn;var rs=0;function ts(r){var t=++rs;return xr(r)+t}var Wr=ts;import{createRequire as es}from"module";var os=es(import.meta.url),{createReadStream:as,createWriteStream:fs,existsSync:Qe,promises:is,unlinkSync:ns}=os("graceful-fs"),Or=class{constructor(t){this.defaultValue=[],this.deserialize=JSON.parse,this.dirPath=t}serialize(t){return JSON.stringify(t,null,2)}async mkdirSync(){try{await is.mkdir(this.dirPath)}catch(t){if(t.code!=="EEXIST")throw t}}checkTable(t){return Promise.resolve(Qe(`${this.dirPath}/${t}.json`))}async readFile(t){let e=[],o=as(`${this.dirPath}/${t}.json`,{flags:"r"});return new Promise((a,f)=>{o.on("data",i=>{e.push(i)}),o.on("end",()=>{let i=Buffer.concat(e).toString();a(this.deserialize(i))}),o.on("error",i=>{f(i)})})}async save(t,e=this.defaultValue){return new Promise((o,a)=>{let f=fs(`${this.dirPath}/${t}.json`);f.on("finish",()=>o(!0)),f.on("error",i=>a(i)),f.write(this.serialize(e)),f.end()})}async createTable(t){return await this.checkTable(t)?await this.readFile(t):(await this.save(t,this.defaultValue),this.defaultValue)}dropTable(t){Qe(`${this.dirPath}/${t}.json`)&&ns(`${this.dirPath}/${t}.json`)}};var C={assign:Cr,filter:jr,find:Br,remove:Gr,uniqueId:Wr},ke=class{constructor(t){this.utils=new Or(t),this.cache={},this.utils.mkdirSync()}cleanCache(){this.cache={}}async createTable(t){let e;if(typeof t=="string")e=await this.utils.createTable(t),this.cache[t]=e;else if(Array.isArray(t))for(let o of t)e=await this.utils.createTable(o),this.cache[o]=e;return e}async get(t){try{if(await this.utils.checkTable(t))if(!this.cache[t]||this.cache[t].length===0){let e=await this.utils.readFile(t);return this.cache[t]=e,e}else return this.cache[t];else return}catch(e){console.error(e)}}async getById(t,e){return(!this.cache[t]||this.cache[t].length===0)&&await this.get(t),C.find(this.cache[t],{id:e})}async getWhere(t,e){let o=await this.get(t);return C.filter(o,e)}async insert(t,e){let o=[];if(Array.isArray(e))for(let a of e){let f=this.__insert(t,a);o.push(f)}else{let a=this.__insert(t,e);o.push(a)}return await this.__save(t),o}async updateById(t,e,o){let a=C.find(this.cache[t],{id:e});return a&&(C.assign(a,o),await this.__save(t)),a}async updateWhere(t,e,o){let a=C.filter(this.cache[t],e);return a.forEach(f=>C.assign(f,o)),await this.__save(t),a}async removeById(t,e){C.remove(this.cache[t],{id:e}),await this.__save(t)}async removeWhere(t,e){C.remove(this.cache[t],e),await this.__save(t)}async truncateTable(t){this.cache[t]=[],await this.__save(t)}dropTable(t){delete this.cache[t],this.utils.dropTable(t)}__insert(t,e){let o={...e,id:C.uniqueId()};return this.cache[t].push(o),o}async __save(t){await this.utils.save(t,this.cache[t])}};export{ke as JsonDB};
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
